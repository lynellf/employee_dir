var employees=[],cards=[],userDir=document.querySelector(".employees"),overlay=document.querySelector("#overlay"),modal=document.querySelector(".modal__container"),modalBack=document.querySelector("#modalBack"),modalForward=document.querySelector("#modalForward"),employeeDetails=document.querySelector("#employeeDetails"),searchBar=document.querySelector(".header__search"),employeesLoaded=!1;function capitalize(e){var t=e.charAt(0),a=e.slice(1);return t.toUpperCase()+a}function capAll(e){for(var t=e.split(" "),a=[],l=0;l<t.length;l++)a.push(capitalize(t[l]));return a.join(" ")}function displayEmployee(e){var t=document.createElement("div"),a=document.createElement("div"),l=document.createElement("h3"),o=document.createElement("span"),c=document.createElement("span"),n=new Image;a.className="card__info",l.className="card__name",o.className="card__email",c.className="card__city",n.className="card__avy",t.className="employees__card",t.setAttribute("index",e),n.src=employees[e].picture.large,l.textContent=capitalize(employees[e].name.first)+" "+capitalize(employees[e].name.last),o.textContent=employees[e].email,c.textContent=capAll(employees[e].location.city),employees[e].email.length>25&&(o.style.fontSize="12px"),a.appendChild(l),a.appendChild(o),a.appendChild(c),t.appendChild(n),t.appendChild(a),userDir.appendChild(t)}function searchEmployee(){searchBar.addEventListener("keyup",function(e){for(var t=e.target.value.toLowerCase(),a=0;a<employees.length;a++)employees[a].name.first.indexOf(t)>-1||employees[a].name.last.indexOf(t)>-1||employees[a].login.username.indexOf(t)>-1?cards[a].className="employees__card":cards[a].className="employees__card--hidden"})}function displayModal(){if(!0===employeesLoaded)for(var e=0;e<cards.length;e++)cards[e].addEventListener("click",function(e){if("employees__card"===e.currentTarget.className){var t=parseInt(e.currentTarget.getAttribute("index")),a=(cards[t].getBoundingClientRect(),(window.pageYOffset/document.body.scrollHeight*100+5).toString()),l=new Date(employees[t].dob),o=document.createElement("div"),c=document.createElement("div"),n=document.createElement("span"),r=new Image,s=document.createElement("h3"),m=document.createElement("span"),d=document.createElement("span"),i=document.createElement("span"),p=document.createElement("span"),u=document.createElement("span"),y=document.createElement("span");o.className="modal__basic",n.className="modal__close",s.className="modal__name",m.className="modal__username",d.className="modal__email",i.className="modal__city",r.src=employees[t].picture.large,r.className="modal__avy",c.className="modal__more",p.className="modal__phone",u.className="modal__address",y.className="modal__birthdate",overlay.className="directory__overlay",t>0?modalBack.setAttribute("class","modal__back"):modalBack.setAttribute("class","modal__back--inactive"),t===employees.length-1?modalForward.setAttribute("class","modal__forward--inactive"):modalForward.setAttribute("class","modal__forward"),modalBack.setAttribute("index",t),modalForward.setAttribute("index",t),s.textContent=capAll(employees[t].name.first)+" "+capAll(employees[t].name.last),m.textContent="Username: "+employees[t].login.username,d.textContent=employees[t].email,i.textContent=capitalize(employees[t].location.city),p.textContent=employees[t].cell,u.textContent=capAll(employees[t].location.street)+" "+capAll(employees[t].location.city)+", "+capitalize(employees[t].location.state)+" "+employees[t].location.postcode,y.textContent="Birthdate: "+(l.getMonth()+1)+"/"+l.getDate()+"/"+l.getFullYear().toString().substr(-2),employeeDetails.className="modal--inactive",modal.style.top=a+"%",o.appendChild(r),o.appendChild(s),o.appendChild(m),o.appendChild(d),o.appendChild(i),c.appendChild(p),c.appendChild(u),c.appendChild(y),employeeDetails.appendChild(n),employeeDetails.appendChild(o),employeeDetails.appendChild(c),employeeDetails.className="modal"}closeModal()})}function closeModal(){var e=document.querySelector(".modal__close");document.querySelector(".modal__basic"),document.querySelector(".modal__more");function t(){for(employeeDetails.className="",overlay.className="directory__overlay--inactive",modalBack.setAttribute("class","modal__back--inactive"),modalForward.setAttribute("class","modal__forward--inactive");employeeDetails.firstChild;)employeeDetails.removeChild(employeeDetails.firstChild)}e.addEventListener("click",function(){t()}),overlay.addEventListener("click",function(){t()})}modalForward.addEventListener("click",function(e){var t=parseInt(e.currentTarget.getAttribute("index")),a=t+1,l=(document.querySelector(".modal__close"),document.querySelector(".modal__avy")),o=document.querySelector(".modal__name"),c=document.querySelector(".modal__username"),n=document.querySelector(".modal__email"),r=document.querySelector(".modal__city"),s=document.querySelector(".modal__phone"),m=document.querySelector(".modal__address"),d=new Date(employees[a].dob),i=document.querySelector(".modal__birthdate");modalBack.setAttribute("index",a),modalForward.setAttribute("index",a),o.textContent=capAll(employees[a].name.first)+" "+capAll(employees[a].name.last),c.textContent="Username: "+employees[a].login.username,n.textContent=employees[a].email,r.textContent=capitalize(employees[a].location.city),l.src=employees[a].picture.large,s.textContent=employees[a].cell,a!==employees.length-1?modalForward.setAttribute("class","modal__forward"):modalForward.setAttribute("class","modal__forward--inactive"),a>0&&modalBack.setAttribute("class","modal__back"),m.textContent=capAll(employees[a].location.street)+" "+capAll(employees[a].location.city)+", "+capitalize(employees[a].location.state)+" "+employees[a].location.postcode,i.textContent="Birthdate: "+(d.getMonth()+1)+"/"+d.getDate()+"/"+d.getFullYear().toString().substr(-2)}),modalBack.addEventListener("click",function(e){var t=parseInt(e.currentTarget.getAttribute("index")),a=t-1,l=(document.querySelector(".modal__close"),document.querySelector(".modal__avy")),o=document.querySelector(".modal__name"),c=document.querySelector(".modal__username"),n=document.querySelector(".modal__email"),r=document.querySelector(".modal__city"),s=document.querySelector(".modal__phone"),m=document.querySelector(".modal__address"),d=new Date(employees[a].dob),i=document.querySelector(".modal__birthdate");modalBack.setAttribute("index",a),modalForward.setAttribute("index",a),o.textContent=capAll(employees[a].name.first)+" "+capAll(employees[a].name.last),c.textContent="Username: "+employees[a].login.username,n.textContent=employees[a].email,r.textContent=capitalize(employees[a].location.city),l.src=employees[a].picture.large,s.textContent=employees[a].cell,a!==employees.length-1?modalForward.setAttribute("class","modal__forward"):modalForward.setAttribute("class","modal__forward--inactive"),a>0?modalBack.setAttribute("class","modal__back"):modalBack.setAttribute("class","modal__back--inactive"),m.textContent=capAll(employees[a].location.street)+" "+capAll(employees[a].location.city)+", "+capitalize(employees[a].location.state)+" "+employees[a].location.postcode,i.textContent="Birthdate: "+(d.getMonth()+1)+"/"+d.getDate()+"/"+d.getFullYear().toString().substr(-2)}),$.ajax({url:"https://randomuser.me/api/?results=12",dataType:"json",success:function(e){employees=e.results,console.log(employees);for(var t=0;t<employees.length;t++)displayEmployee(t);cards=document.querySelectorAll(".employees__card"),employeesLoaded=!0,displayModal(),searchEmployee()}});